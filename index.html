<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AC Tuscolano | Gestione Squadra</title>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css"/>

  <style>
    /* CSS originale */
    :root{
      /* Brand */
      --white:#ffffff;
      --yellow:#ffd700;
      --red:#da0000;
      --ink:#1f2328;
      --ink-sub:#495057;

      /* Surfaces */
      --bg:#f7f7f9;
      --card:#ffffff;
      --line:#e6e8ec;

      /* Effects */
      --radius:16px;
      --shadow:0 1px 2px rgba(16,24,40,.06), 0 10px 16px rgba(16,24,40,.06);
      --ring:0 0 0 3px rgba(218,0,0,.12);

      /* Motion */
      --duration:180ms;
      --ease:cubic-bezier(.2,.6,.2,1);
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji"}
    a{color:inherit}

    /* Header */
    header{
      position:sticky;top:0;z-index:50;
      background:linear-gradient(90deg,var(--red),#ff4a3d);
      color:var(--white);
      border-bottom:6px solid var(--yellow);
      box-shadow:0 6px 16px rgba(218,0,0,.15);
    }
    .hero{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:16px;padding:14px 16px}
    /* NOTA: Assicurati che 'logo.png' esista nella stessa cartella */
    .hero img{width:56px;height:56px;object-fit:contain;filter:drop-shadow(0 2px 6px rgba(0,0,0,.25))}
    .brand{display:flex;flex-direction:column}
    .brand .club{margin:0;line-height:1.05;font-weight:900;letter-spacing:.2px;font-size:clamp(22px,3vw,34px)}
    .brand .tag{margin:0;opacity:.92;font-weight:600;font-size:clamp(12px,2vw,14px)}

    /* Top nav */
    nav{background:var(--yellow);border-bottom:1px solid #f0d200}
    .nav-wrap{max-width:1200px;margin:0 auto;display:flex;flex-wrap:wrap;gap:8px;padding:8px 16px;align-items:center}
    .tab,.btn{appearance:none;border:0;border-radius:999px;padding:10px 14px;font-weight:700;cursor:pointer;background:var(--card);color:var(--ink);text-decoration:none;display:inline-flex;align-items:center;gap:6px;transition:all var(--duration) var(--ease);box-shadow:inset 0 0 0 1px var(--line)}
    .tab:hover,.btn:hover{transform:translateY(-1px)}
    .tab[aria-current="page"]{box-shadow:inset 0 0 0 2px var(--red)}
    .btn--accent{background:var(--red);color:#fff;box-shadow:none}
    .btn--accent:hover{filter:brightness(.96)}
    .btn--admin{background:#111;color:#fff}
    .btn--admin:hover{filter:brightness(1.08)}
    #auth-toggle-btn{margin-left:auto}

    /* Layout */
    main{max-width:1200px;margin:18px auto;padding:0 16px}
    section{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);padding:18px;margin:16px 0;box-shadow:var(--shadow)}
    /* MODIFICA: Visibilità form login (nascosto di default) */
    #login-section{display:none} 
    section h2{margin:0 0 14px 0;color:var(--red);border-bottom:3px solid var(--yellow);padding-bottom:6px}

    label{font-weight:700;margin-top:10px;display:block}
    input,select,textarea{width:100%;max-width:460px;padding:10px;border:1px solid var(--line);border-radius:12px;margin-top:6px;background:#fff}
    input:focus,select:focus,textarea:focus{outline:none;box-shadow:var(--ring)}
    form .actions{margin-top:14px;display:flex;flex-wrap:wrap;gap:8px}
    .help{color:var(--ink-sub);font-size:.92rem}

    /* Reusable */
    ul{list-style:none;padding:0;margin:0}
    .grid{display:grid;gap:12px}
    .grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
    .grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
    @media (max-width:900px){.grid.cols-3{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media (max-width:640px){.grid.cols-2,.grid.cols-3{grid-template-columns:1fr}}

    .card{background:#fff;border:1px solid var(--line);border-radius:14px;padding:12px;box-shadow:var(--shadow)}
    .row{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
    .pill{background:var(--yellow);color:#111;border-radius:999px;padding:4px 10px;font-weight:800;font-size:.8rem}

    .player-title{font-weight:800}
    .player-sub{color:var(--ink-sub);font-size:.95rem}

    /* Field */
    .field{position:relative;background:#0e7a0d;border:2px solid #fff;border-radius:14px;height:360px;color:#fff;margin-top:10px;overflow:hidden}
    .field:before{content:"";position:absolute;left:50%;top:0;bottom:0;width:2px;background:#fff;opacity:.25;transform:translateX(-50%)}
    .marker{position:absolute;transform:translate(-50%,-50%);background:var(--yellow);color:#111;border:1px solid #fff;border-radius:999px;padding:6px 8px;font-size:11px;line-height:1;text-align:center;min-width:72px;max-width:90px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

    /* Admin bar */
    #admin-menu{display:none;background:var(--red);padding:8px 16px}
    #admin-menu .tab{background:var(--yellow);color:#111;box-shadow:none;border-radius:12px}

    /* Table-like list */
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{padding:8px 10px;border-bottom:1px solid var(--line);text-align:left}
    .table thead th{font-size:.9rem;color:#000}
    .table input, .table select {max-width: none !important; margin-top: 0; padding: 6px 8px; border-radius: 8px; font-size: 0.9rem;}
    
    /* Modale Video */
    #video-modal{
        display: none; 
        position: fixed; 
        top: 0; 
        left: 0; 
        width: 100%; 
        height: 100%; 
        background: rgba(0,0,0,0.85); 
        z-index: 100; 
        align-items: center; 
        justify-content: center; 
        padding: 20px;
    }
    #close-video-modal{
        position: absolute; 
        top: -10px; 
        right: -10px; 
        z-index: 110; 
        font-size: 1.2rem; 
        line-height: 1.2;
    }
    #video-iframe-container{
        position: relative; 
        width: 100%; 
        padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
        height: 0; 
        border-radius: var(--radius); 
        overflow: hidden;
    }

    /* Footer */
    footer{background:var(--ink-sub);color:#fff;padding:10px 16px;margin-top:22px;font-size:.8rem;text-align:center;border-top:4px solid var(--yellow)}

    @media (prefers-reduced-motion: reduce){.tab,.btn{transition:none}}
  

/* === Effetti di transizione per le sezioni visibili (.content-section) === */
.content-section {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.5s ease;
}
.content-section.active {
  opacity: 1;
  pointer-events: all;
}
</style>

  <script type="module">
    /* Firebase v9 (modular) */
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js';
    import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, signOut, createUserWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js';
    import { getDatabase, ref, set, push, get, update, remove, onValue } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js';

    // *** CONFIGURAZIONE FIREBASE (Modifica con i tuoi dati reali) ***
    const firebaseConfig = {
      apiKey: "AIzaSyAQLQYXcwyFt5luNw1iA5N2-EfnbF1Bc7U", // ESEMPIO, CAMBIA!
      authDomain: "actuscolano.firebaseapp.com",
      databaseURL: "https://actuscolano-default-rtdb.firebaseio.com",
      projectId: "actuscolano",
      storageBucket: "actuscolano.firebasestorage.app",
      messagingSenderId: "62685359731",
      appId: "1:62685359731:web:26819bedd94fcb1ce8c406",
      measurementId: "G-TSVH8PH4RC"
    };

    // Inizializzazioni
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    const ADMIN_UID = "tbHGXtpvBDfmVIrNT2QVyeBinCV2"; // *** CAMBIA CON L'UID DEL TUO ADMIN ***
    let isAdmin = false;
    let selectedMatchKey = null; 

    // Seconda app per creare utenti senza sloggarci (solo admin)
    const adminSecondaryApp = initializeApp(firebaseConfig, "adminSecondary");
    const adminSecondaryAuth = getAuth(adminSecondaryApp);

    /* Helpers */
    const byId = (id)=>document.getElementById(id);
    const v = (id)=>byId(id)?.value || '';
    const escapeHtml=(s='')=>s.toString().replace(/[&<>"']/g,c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[c]));
    const toDate = (d)=>{ const [dd,mm,yyyy] = String(d||'').split('/'); return new Date(`${mm}/${dd}/${yyyy}`); };

    // ** ARRAY SEZIONI **
    const PUBLIC_SECTIONS = ['rosa-section','calendario-section','statistiche-section','formazione-pubblica-section','video-section', 'classifica-section'];
    const ADMIN_SECTIONS = [
      'admin-inserimento-giocatori-section',
      'admin-inserimento-giornate-section',
      'admin-calendario-section',
      'admin-formazione-section',
      'admin-statistiche-section',
      'admin-candidature-section',
      'admin-gestione-dati-section',
      'admin-utenti-section',
      'admin-video-section' 
    ];
    const ALL_SECTIONS = [...PUBLIC_SECTIONS, ...ADMIN_SECTIONS, 'login-section']; 

    // Funzione per mostrare le sezioni pubbliche
    window.showPublicSection = (id = 'rosa-section') => {
      ALL_SECTIONS.forEach(secId => { 
        const el = byId(secId); 
        if (el) {
          if (secId === id) {
            el.classList.add('active');
            el.style.display = 'block';
          } else {
            el.classList.remove('active');
            el.style.display = 'none';
          }
        }
      });
      document.querySelectorAll('.tab[data-target]').forEach(t=>{ t.setAttribute('aria-current', t.dataset.target===id ? 'page' : 'false'); });
      document.querySelectorAll('#admin-menu .tab').forEach(t=>{ t.setAttribute('aria-current', 'false'); });
      window.scrollTo({ top: 0, behavior: 'smooth' });
      // Attiva il contenuto dinamico
      if(id === 'rosa-section') loadRosa();
      if(id === 'calendario-section') loadProssimeGiornate(false);
      if(id === 'statistiche-section') loadStatistiche();
      if(id === 'classifica-section') loadClassifica();
      if(id === 'video-section') loadVideoList();
    };
    
    // Funzione per mostrare le sezioni admin
    window.showAdminSection = (id) => {
        if(!isAdmin) return showLogin();
        
        ALL_SECTIONS.forEach(secId => { 
          const el = byId(secId); 
          if (el) {
            if (secId === id) {
                el.classList.add('active');
                el.style.display = 'block';
            } else {
                el.classList.remove('active');
                el.style.display = 'none';
            }
          }
        });
        
        document.querySelectorAll('.tab[data-target]').forEach(t=>{ t.setAttribute('aria-current', 'false'); });
        document.querySelectorAll(`#admin-menu .tab`).forEach(t=>{ 
            t.setAttribute('aria-current', t.dataset.adminTarget===id ? 'page' : 'false');
        });

        // Ricarica i dati specifici per la sezione admin
        if(id==='admin-calendario-section'){ loadProssimeGiornate(true); }
        if(id==='admin-inserimento-giornate-section'){ $("#match-data").datepicker({ dateFormat:"dd/mm/yy", minDate:0 }); }
        if(id==='admin-candidature-section'){ loadCandidature(); }
        if(id==='admin-gestione-dati-section'){ window.loadCrudGiocatori(); window.loadCrudPartite(); }
        if (id === 'admin-video-section') loadPartitePerVideoAdmin(); 

        window.scrollTo({ top: 0, behavior: 'smooth' });
    };

    function showLogin(){ byId('login-section').style.display='block'; window.scrollTo({top:0,behavior:'smooth'}); }
    function hideLogin(){ byId('login-section').style.display='none'; }
    function toggleAdminUI(){ 
        byId('admin-menu').style.display = isAdmin ? 'block' : 'none'; 
        if (!isAdmin) { window.showPublicSection('rosa-section'); }
    }
    function setAuthButton(user){ const b=byId('auth-toggle-btn'); if(user){ b.textContent='Logout'; b.classList.add('btn--accent'); } else { b.textContent='Login'; b.classList.remove('btn--accent'); } }

    /* Auth */
    onAuthStateChanged(auth, async (user)=>{
      isAdmin = !!user && (user.uid===ADMIN_UID); 
      setAuthButton(user);
      hideLogin();
      toggleAdminUI();
      
      if(user && isAdmin) {
         window.showAdminSection('admin-inserimento-giocatori-section');
      } else {
         window.showPublicSection('rosa-section');
      }
    });
    
    window.handleAuthToggle = ()=>{
      const user = auth.currentUser;
      if(user){
        signOut(auth).then(()=>{ hideLogin(); window.showPublicSection('rosa-section'); });
      } else {
        showLogin();
      }
    };
    
    /* ===== SCHEDULAZIONE: refresh giornaliero classifica (23:00) ===== */
    function msUntilNext(hour, minute = 0, second = 0) {
      const now = new Date();
      const next = new Date(now);
      next.setHours(hour, minute, second, 0);
      if (next <= now) next.setDate(next.getDate() + 1);
      return next - now;
    }
    window.scheduleDailyClassificaRefresh = () => {
      const ms = msUntilNext(23, 0, 0);
      const infoEl = document.getElementById('classifica-next-run');
      if (infoEl) {
        const when = new Date(Date.now() + ms).toLocaleString('it-IT');
        infoEl.textContent = `Prossimo aggiornamento: ${when}`;
      }
      setTimeout(async function tick() {
        await loadClassifica();
        window.scheduleDailyClassificaRefresh();
      }, ms);
    };


    /* ===== HANDLER: Inserimento Giocatori (Admin) ===== */
    const handlePlayerForm = async (e) => {
        e.preventDefault();
        if (!isAdmin) return alert("Solo admin.");
        
        const player = {
            nome: v('player-nome'),
            cognome: v('player-cognome'),
            numero: parseInt(v('player-numero')),
            ruolo: v('player-ruolo'),
            stato: v('player-stato')
        };

        if(!player.nome || !player.cognome || isNaN(player.numero) || !player.ruolo || !player.stato) return alert("Compila tutti i campi!");

        try {
            // Usa il cognome+nome come chiave univoca (o potresti usare push() per un ID univoco casuale)
            const key = player.cognome.toLowerCase() + player.nome.toLowerCase();
            await set(ref(db, 'rosa/' + key), player);
            alert('Giocatore salvato con successo!');
            e.target.reset();
            loadRosa(); // Aggiorna la rosa pubblica
            loadCrudGiocatori(); // Aggiorna la lista admin
        } catch(error) {
            alert('Errore salvataggio: ' + error.message);
        }
    };

    /* ===== HANDLER: Inserimento Partite (Admin) ===== */
    const handleMatchForm = async (e) => {
        e.preventDefault();
        if (!isAdmin) return alert("Solo admin.");
        
        const partita = {
            avversaria: v('match-avversaria'),
            data: v('match-data'),
            orario: v('match-orario'),
            campo: v('match-campo'),
            casa: v('match-luogo') === 'casa',
            risultato: 'N/D', // Risultato iniziale
            formazionePubblicata: false,
            linkVideo: ''
        };

        if(!partita.avversaria || !partita.data || !partita.orario || !partita.campo) return alert("Compila tutti i campi!");

        try {
            const newMatchRef = push(ref(db, 'calendario'));
            await set(newMatchRef, partita);
            alert('Partita salvata con successo!');
            e.target.reset();
            loadProssimeGiornate(false); // Aggiorna il calendario pubblico
            loadProssimeGiornate(true); // Aggiorna il calendario admin
        } catch(error) {
            alert('Errore salvataggio: ' + error.message);
        }
    };

    /* ===== FUNZIONE: Classifica (Integrata da romatornei.it) ===== */
    const loadClassifica = async () => {
      const classificaContent = byId('classifica-content');
      if (!classificaContent) return;

      classificaContent.innerHTML = `<div class="help">Caricamento classifica in corso...</div>`;

      try {
        const now = new Date();
        const todayKey = now.toISOString().split('T')[0];
        const snap = await get(ref(db, 'classifica_cache'));
        const cache = snap.val() || {};
        const cachedHtml = cache.html;
        const cachedDate = cache.date;

        if (cachedHtml && cachedDate === todayKey && !isAdmin) { // Gli admin possono forzare l'update
          classificaContent.innerHTML = cachedHtml;
          return;
        }

        const url = "https://www.romatornei.it/calcio-a-8-over-40-roma-sud/";
        // Uso allorigins per il CORS (necessario per siti esterni)
        const proxy = "https://api.allorigins.win/get?url=" + encodeURIComponent(url) + "&cacheBust=" + Date.now();
        const response = await fetch(proxy);
        const data = await response.json();

        const parser = new DOMParser();
        const doc = parser.parseFromString(data.contents, "text/html");
        // Tentativo di trovare la tabella corretta
        const table = doc.querySelector(".table-responsive table") || doc.querySelector("table[class*='table']") || doc.querySelector("table");

        if (!table) {
          classificaContent.innerHTML = `<div class="help">Impossibile trovare la classifica sul sito remoto.</div>`;
          return;
        }

        // Estrazione e normalizzazione HTML per la cache
        const theadHTML = table.querySelector('thead')?.outerHTML || '';
        const tbodyHTML = Array.from(table.querySelectorAll('tbody tr')).map((tr, idx) => {
            const rowHTML = Array.from(tr.querySelectorAll('td, th')).map(td => 
                `<td style="padding:8px;text-align:center;border-bottom:1px solid var(--line);font-size:13px;">${td.innerHTML}</td>`
            ).join('');
            const bg = idx % 2 === 1 ? ' style="background:#f8f8f8"' : '';
            return `<tr${bg}>${rowHTML}</tr>`;
        }).join('');

        const normalizedHTML = `
          <div class="help">Classifica aggiornata automaticamente da <a href="${url}" target="_blank" rel="noopener">romatornei.it</a></div>
          <div style="overflow-x:auto">
            <table class="table" style="width:100%;border-collapse:collapse;table-layout:fixed;margin-top:8px">
              ${theadHTML}
              <tbody>${tbodyHTML}</tbody>
            </table>
          </div>
          <div class="help" style="margin-top:8px;">Ultimo aggiornamento: ${new Date().toLocaleString("it-IT")}</div>
          <div id="classifica-next-run" class="help" style="margin-top:4px;"></div>
        `;

        classificaContent.innerHTML = normalizedHTML;

        // Salva cache (solo se è andata a buon fine)
        await set(ref(db, 'classifica_cache'), {
          html: normalizedHTML,
          date: todayKey,
          timestamp: Date.now()
        });
      } catch (error) {
        console.error("Errore caricamento classifica:", error);
        const snapFallback = await get(ref(db, 'classifica_cache'));
        const cache = snapFallback.val();
        if (cache && cache.html) {
          classificaContent.innerHTML = cache.html;
        } else {
          classificaContent.innerHTML = `<div class="help" style="color:red">Errore nel recupero della classifica.</div>`;
        }
      }
    };

    /* ===== Modifica: loadRosa (rimosso Stato, aggiunti Gol e Assist) ===== */
    async function loadRosa(){ 
      const ul = byId('rosa-list'); 
      if(!ul) return; 
      ul.innerHTML='<div class="help">Caricamento rosa...</div>'; 
      
      const [rosaSnap, statsSnap] = await Promise.all([
        get(ref(db, 'rosa')),
        get(ref(db, 'statistiche/giocatori'))
      ]);
      
      const rosaVal = rosaSnap.val() || {}; 
      const statsVal = statsSnap.val() || {};
      const rows = Object.entries(rosaVal).sort((a,b)=> (a[1].numero||0)-(b[1].numero||0)); 
      
      if(!rows.length){ 
        ul.innerHTML = '<div class="help">Nessun giocatore inserito.</div>'; 
        return; 
      } 
      
      ul.className='grid cols-2'; 
      let html = '';
      rows.forEach(([id, g])=>{ 
        const stats = statsVal[id] || {gol: 0, assist: 0};
        
        // HTML Modificato: Rimosso 'Stato' e Aggiunto 'Gol' e 'Assist'
        html += ` 
          <li class="card">
            <div class="row" style="justify-content:space-between"> 
              <div> 
                <div class="player-title">${escapeHtml(g.nome)} ${escapeHtml(g.cognome)} <span class="pill">#${escapeHtml(g.numero)}</span></div> 
                <div class="player-sub">Ruolo: <b>${escapeHtml(g.ruolo)}</b></div> 
              </div> 
              <div style="text-align:right">
                  <div class="player-sub">Gol: <b>${stats.gol || 0}</b></div>
                  <div class="player-sub">Assist: <b>${stats.assist || 0}</b></div>
              </div>
            </div>
          </li>`; 
      }); 
      ul.innerHTML = html;
    }

    /* ===== Modifica: loadStatistiche (Rimosse statistiche squadra/presenze e filtro) ===== */
    async function loadStatistiche(){ 
        const gl = byId('statistiche-giocatori-list'); // Player stats list
        if(!gl) return;

        gl.innerHTML='<div class="help">Caricamento statistiche giocatori...</div>';

        const [rosaSnap, statsSnap] = await Promise.all([
            get(ref(db, 'rosa')),
            get(ref(db, 'statistiche/giocatori'))
        ]);
        
        const rosa = rosaSnap.val() || {};
        const playerStats = statsSnap.val() || {};
        
        // Ordina e filtra: Gol > Assist > 0
        const playerRows = Object.entries(playerStats)
            .sort((a, b) => {
                const golB = (b[1].gol || 0);
                const golA = (a[1].gol || 0);
                if(golA !== golB) return golB - golA; 

                const assistB = (b[1].assist || 0);
                const assistA = (a[1].assist || 0);
                return assistB - assistA; 
            })
            // Filtra: solo giocatori con almeno un Gol o un Assist
            .filter(([id, s]) => (s.gol || 0) > 0 || (s.assist || 0) > 0);
        
        let playerHtml = '';
        if (playerRows.length === 0) {
             playerHtml = '<div class="help">Nessun giocatore ha ancora registrato Gol o Assist.</div>';
        } else {
            playerHtml += '<h3>Classifica Marcatori & Assist-Man</h3>';
            playerHtml += '<table class="table">';
            // Modificato: Rimosso "Presenze"
            playerHtml += '<thead><tr><th>Nome</th><th style="text-align:center">Gol</th><th style="text-align:center">Assist</th></tr></thead>';
            playerHtml += '<tbody>';

            playerRows.forEach(([id, s]) => {
                const player = rosa[id] || { nome: 'Giocatore', cognome: 'Sconosciuto' };
                const nome = escapeHtml(player.nome);
                const cognome = escapeHtml(player.cognome);
                const gol = s.gol || 0;
                const assist = s.assist || 0;

                // Modificato: Rimosso colonna Presenze
                playerHtml += `<tr>
                    <td>${nome} ${cognome}</td>
                    <td style="text-align:center">${gol}</td>
                    <td style="text-align:center">${assist}</td>
                </tr>`;
            });

            playerHtml += '</tbody></table>';
        }

        gl.innerHTML = playerHtml;
    }

    /* ===== FUNZIONI: Candidatura e Calendario (Base) ===== */
    async function loadProssimeGiornate(asAdmin){
        const listId = asAdmin ? 'admin-calendario-list' : 'calendario-list';
        const ul = byId(listId);
        if(!ul) return;

        ul.innerHTML='<div class="help">Caricamento calendario...</div>';
        const snap = await get(ref(db,'calendario'));
        const val = snap.val() || {};

        let entries = Object.entries(val);
        const today = new Date(); today.setHours(0, 0, 0, 0);

        entries.sort((a,b)=> toDate(b[1].data)-toDate(a[1].data)); // Ordina dalla più recente

        if(!entries.length){
            ul.innerHTML = '<div class="help">Nessuna partita a calendario.</div>';
            return;
        }

        ul.className='grid cols-3';
        ul.innerHTML = ''; // Svuota dopo il check

        for(const [matchId,m] of entries){
            const candSnap = await get(ref(db,`calendario/${matchId}/candidature`));
            const cand = candSnap.val() || {};
            const candCount = Object.values(cand).filter(Boolean).length;
            const isPublished = m.formazionePubblicata === true;

            const matchDate = toDate(m.data);
            const isPast = matchDate < today;

            let candButton = '';
            if (isPast) {
                candButton = `<button class="btn" disabled style="opacity:0.6;cursor:not-allowed">Candidatura scaduta</button>`;
            } else {
                candButton = `<button class="btn btn--accent" onclick="candidati('${matchId}')">Candidatura</button>`;
            }

            const li = document.createElement('li');
            li.className='card';
            li.innerHTML = `
                <div class="row" style="justify-content:space-between;align-items:flex-start">
                    <div>
                        <div style="font-weight:800;font-size:1.05rem">vs ${escapeHtml(m.avversaria)}</div>
                        <div class="player-sub">${escapeHtml(m.data)} • ${escapeHtml(m.orario)} • ${escapeHtml(m.campo)} • ${m.casa? 'Casa':'Trasferta'}</div>
                        <div class="player-sub">Candidature: <b>${candCount}</b></div>
                        <div class="player-sub">Risultato: <b>${escapeHtml(m.risultato||'N/D')}</b></div>
                    </div>
                    <div class="row">
                        ${!asAdmin ? `
                            ${candButton}
                            ${isPublished ? `<button class="btn" onclick="showFormazionePubblica('${matchId}','${escapeHtml(m.avversaria)}')">Vedi Formazione</button>` : ''}
                        `:''}
                        ${asAdmin ? `
                            <button class="btn btn--admin" onclick="showFormazioneForm('${matchId}','${escapeHtml(m.avversaria)}')">Formazione & Sost.</button>
                            <button class="btn btn--admin" onclick="showRisultatoForm('${matchId}','${escapeHtml(m.avversaria)}')">Risultato</button>
                        `:''}
                    </div>
                </div>`;
            ul.appendChild(li);
        }
    }

    window.candidati = async(matchId)=>{
        const user = auth.currentUser;
        if(!user){ showLogin(); alert('Per candidarti devi effettuare il login.'); return; }
        await set(ref(db,`calendario/${matchId}/candidature/${user.uid}`), true);
        alert('Disponibilità inviata.');
        loadProssimeGiornate(false);
    };

    /* ===== FUNZIONI: Video (Base) ===== */
    const getYouTubeId = (url) => {
      if (!url) return null;
      const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
      const match = url.match(regExp);
      return (match && match[2].length === 11) ? match[2] : null;
    };

    window.openVideoModal = (youtubeLink) => {
      const videoId = getYouTubeId(youtubeLink);
      if (!videoId) return alert("Link YouTube non valido.");
      
      const iframeSrc = `https://www.youtube.com/embed/${videoId}?rel=0&autoplay=1&modestbranding=1&controls=1&showinfo=0&fs=1&iv_load_policy=3&enablejsapi=1`;
      const iframeHtml = `<iframe width="100%" height="100%" src="${iframeSrc}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen" allowfullscreen style="position:absolute; top:0; left:0; width:100%; height:100%; border-radius:14px;" title="Video Partita AC Tuscolano"></iframe>`;
      
      byId('video-iframe-container').innerHTML = iframeHtml;
      byId('video-modal').style.display = 'flex';
    };

    byId('close-video-modal')?.addEventListener('click', () => {
      byId('video-modal').style.display = 'none';
      byId('video-iframe-container').innerHTML = '';
    });
    
    window.loadVideoList = async () => {
      const ul = byId('video-list-ul');
      if (!ul) return;
      ul.innerHTML = '<li>Caricamento video...</li>';

      try {
        const snapshot = await get(ref(db, 'calendario'));
        const partite = snapshot.val() || {};
        let html = '';

        const sortedKeys = Object.keys(partite).sort((a, b) => toDate(partite[b].data) - toDate(partite[a].data));

        sortedKeys.forEach(key => {
          const p = partite[key];
          if (p.risultato && p.risultato !== 'N/D' && p.linkVideo) {
            const dataOra = p.data && p.orario ? `${p.data} ${p.orario}` : 'Data/Ora sconosciuta';
            const avversario = p.avversaria ? escapeHtml(p.avversaria) : 'Avversario sconosciuto';

            html += `
              <li class="card" style="margin-bottom:12px; display:flex; flex-wrap:wrap; justify-content:space-between; align-items:center; gap:10px;">
                <div>
                  <strong>vs ${avversario} - ${p.risultato}</strong><br>
                  <span class="player-sub">${dataOra} | ${escapeHtml(p.campo)}</span>
                </div>
                <button class="btn btn--accent" onclick="window.openVideoModal('${escapeHtml(p.linkVideo)}')">Guarda Video</button>
              </li>
            `;
          }
        });

        ul.innerHTML = html || '<li>Nessuna partita conclusa con video inserito.</li>';
      } catch(error) {
        console.error("Errore caricamento lista video:", error);
        ul.innerHTML = '<li>Errore durante il caricamento dei video.</li>';
      }
    };

    // Funzioni Admin Video - Logica di base
    const loadPartitePerVideoAdmin = async () => {
      const select = byId('video-partita-select');
      select.innerHTML = '<option value="">Caricamento...</option>';
      byId('video-link-input').value = '';
      byId('save-video-btn').disabled = true;

      try {
        const snapshot = await get(ref(db, 'calendario'));
        const partite = snapshot.val() || {};
        let options = '<option value="">Seleziona una partita conclusa</option>';
        
        const sortedKeys = Object.keys(partite).sort((a, b) => toDate(partite[b].data) - toDate(partite[a].data));

        sortedKeys.forEach(key => {
          const p = partite[key];
          if (p.risultato && p.risultato !== 'N/D') {
            const dataOra = p.data && p.orario ? `${p.data} ${p.orario}` : 'Data/Ora sconosciuta';
            const avversario = p.avversaria ? escapeHtml(p.avversaria) : 'Avversario sconosciuto';
            const videoStatus = p.linkVideo ? ' [VIDEO ESISTENTE]' : '';
            options += `<option value="${key}" data-link="${escapeHtml(p.linkVideo || '')}">vs ${avversario} - ${p.risultato} (${dataOra})${videoStatus}</option>`;
          }
        });

        select.innerHTML = options;
        select.removeEventListener('change', updateVideoForm);
        select.addEventListener('change', updateVideoForm);
        updateVideoForm();
        byId('save-video-btn').disabled = false;
        
      } catch(error) {
        console.error("Errore caricamento partite admin video:", error);
        select.innerHTML = '<option value="">Errore caricamento</option>';
      }
    };

    const updateVideoForm = () => {
      const select = byId('video-partita-select');
      selectedMatchKey = select.value;
      const selectedOption = select.options[select.selectedIndex];
      
      if (selectedMatchKey && selectedOption) {
        const currentLink = selectedOption.dataset.link || '';
        byId('video-link-input').value = currentLink;
        byId('save-video-btn').textContent = currentLink ? 'Aggiorna Link Video' : 'Salva Link Video';
      } else {
        byId('video-link-input').value = '';
        byId('save-video-btn').textContent = 'Salva Link Video';
      }
    };

    const saveVideoLink = async () => {
      if (!isAdmin) return alert("Solo admin.");
      if (!selectedMatchKey) return alert("Seleziona prima una partita.");

      const linkVideo = v('video-link-input').trim();
      if (!linkVideo) return alert("Inserisci il link YouTube.");

      if (!getYouTubeId(linkVideo)) return alert("Il link non sembra essere un URL YouTube valido.");

      try {
        const updates = {};
        updates[`/calendario/${selectedMatchKey}/linkVideo`] = linkVideo;

        await update(ref(db), updates);

        alert('Link video salvato con successo!');
        loadPartitePerVideoAdmin();
        loadVideoList(); 
      } catch(error) {
        alert('Errore salvataggio link: ' + error.message);
        console.error(error);
      }
    };

    /* ===== PLACEHOLDERS ADMIN FUNZIONALI (da implementare completamente) ===== */
    window.showFormazioneForm = (matchId, avversaria) => { 
        if(!isAdmin) return; 
        alert(`Formazione per ${avversaria} (ID: ${matchId}). Logica da implementare in admin-formazione-section.`);
        window.showAdminSection('admin-formazione-section'); 
        byId('formazione-match-title').textContent = `Formazione vs ${avversaria}`;
        // Qui andrebbe la logica per popolare la formazione...
    };

    window.showRisultatoForm = (matchId, avversaria) => { 
        if(!isAdmin) return;
        const risultato = prompt(`Inserisci risultato (Es: 3-1) per ${avversaria}:`);
        if(risultato && risultato.includes('-')){
            update(ref(db, 'calendario/' + matchId), {risultato: risultato.trim()})
                .then(() => { alert('Risultato aggiornato!'); loadProssimeGiornate(true); })
                .catch(err => alert('Errore aggiornamento: ' + err.message));
        } else if (risultato !== null) {
            alert('Formato risultato non valido.');
        }
    };

    window.showFormazionePubblica = (matchId, avversaria) => { 
        alert(`Formazione per ${avversaria} (ID: ${matchId}). Formazione da visualizzare in formazione-pubblica-section.`);
        window.showPublicSection('formazione-pubblica-section');
    };

    window.loadCandidature = () => { /* Funzione Candidature Admin (da completare) */ console.log("loadCandidature placeholder"); };
    window.loadCrudGiocatori = () => { /* Funzione Crud Giocatori Admin (da completare) */ console.log("loadCrudGiocatori placeholder"); };
    window.loadCrudPartite = () => { /* Funzione Crud Partite Admin (da completare) */ console.log("loadCrudPartite placeholder"); };
    
    // Funzioni Admin Crud (minime) - implementate per completezza
    window.deleteItem = async (path, key) => {
        if (!confirm(`Sei sicuro di voler eliminare l'elemento ${key} da ${path}?`)) return;
        try {
            await remove(ref(db, `${path}/${key}`));
            alert('Elemento eliminato.');
            if (path === 'rosa') loadCrudGiocatori();
            if (path === 'calendario') loadCrudPartite();
        } catch(e) {
            alert('Errore eliminazione: ' + e.message);
        }
    };
    
    window.loadCrudGiocatori = async () => {
        const tbody = byId('crud-giocatori-body');
        if (!tbody) return;
        const snap = await get(ref(db, 'rosa'));
        const rosa = snap.val() || {};
        
        let html = Object.entries(rosa).map(([key, g]) => `
            <tr>
                <td>${escapeHtml(g.nome)} ${escapeHtml(g.cognome)}</td>
                <td style="text-align:center">${escapeHtml(g.numero)}</td>
                <td>${escapeHtml(g.ruolo)}</td>
                <td style="text-align:center">
                    <button class="btn" style="padding:4px 8px; font-size:0.8rem" onclick="alert('Funzione Edit da implementare')">Modifica</button>
                    <button class="btn btn--accent" style="padding:4px 8px; font-size:0.8rem" onclick="deleteItem('rosa', '${key}')">Elimina</button>
                </td>
            </tr>
        `).join('');
        tbody.innerHTML = html || '<tr><td colspan="4">Nessun giocatore.</td></tr>';
    };

    window.loadCrudPartite = async () => {
        const tbody = byId('crud-partite-body');
        if (!tbody) return;
        const snap = await get(ref(db, 'calendario'));
        const partite = snap.val() || {};
        
        let html = Object.entries(partite).sort((a,b)=> toDate(b[1].data)-toDate(a[1].data)).map(([key, p]) => `
            <tr>
                <td>${escapeHtml(p.avversaria)}</td>
                <td>${escapeHtml(p.data)} ${escapeHtml(p.orario)}</td>
                <td style="text-align:center">${escapeHtml(p.risultato || 'N/D')}</td>
                <td style="text-align:center">
                    <button class="btn" style="padding:4px 8px; font-size:0.8rem" onclick="alert('Funzione Edit da implementare')">Modifica</button>
                    <button class="btn btn--accent" style="padding:4px 8px; font-size:0.8rem" onclick="deleteItem('calendario', '${key}')">Elimina</button>
                </td>
            </tr>
        `).join('');
        tbody.innerHTML = html || '<tr><td colspan="4">Nessuna partita.</td></tr>';
    };

    /* ===== INIZIALIZZAZIONE EVENTI ===== */
    document.addEventListener('DOMContentLoaded', () => {
      // Login
      byId('login-form')?.addEventListener('submit',e=>{
        e.preventDefault();
        const email = v('login-email').trim();
        const pw = v('login-password');
        signInWithEmailAndPassword(auth,email,pw).then(()=>{ hideLogin(); }).catch(err=>alert("Errore login: "+err.message));
      });

      // Creazione utente (admin)
      byId('create-user-form')?.addEventListener('submit',async e=>{
        e.preventDefault();
        if(!isAdmin) return alert("Solo admin.");
        const nome = v('new-nome');
        const cognome = v('new-cognome');
        const email = v('new-email').trim();
        const pw = v('new-password');
        if(!nome||!cognome||!email||!pw) return alert("Compila tutti i campi!");
        try{
          const mod = await import('https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js');
          const cred = await mod.createUserWithEmailAndPassword(adminSecondaryAuth,email,pw);
          const uid = cred.user.uid;
          await set(ref(db,'utenti/'+uid),{email, nome, cognome});
          alert('Utenza creata con successo. UID: '+uid);
          e.target.reset();
        }catch(err){ alert('Errore creazione: '+(err?.message||err)); }
      });
      
      // Admin Form Handlers
      byId('player-form')?.addEventListener('submit', handlePlayerForm);
      byId('match-form')?.addEventListener('submit', handleMatchForm);
      byId('save-video-btn')?.addEventListener('click', saveVideoLink);

      // Navigazione Pubblica (richiamata anche in showPublicSection)
      byId('rosa-tab')?.addEventListener('click', () => showPublicSection('rosa-section'));
      byId('calendario-tab')?.addEventListener('click', () => showPublicSection('calendario-section'));
      byId('statistiche-tab')?.addEventListener('click', () => showPublicSection('statistiche-section'));
      byId('video-tab')?.addEventListener('click', () => showPublicSection('video-section'));
      byId('classifica-tab')?.addEventListener('click', () => showPublicSection('classifica-section'));
      
      // Avvia refresh classifica
      window.scheduleDailyClassificaRefresh();
    });
  </script>
</head>
<body>

  <header>
    <div class="hero">
      <img src="logo.png" alt="Logo AC Tuscolano" />
      <div class="brand">
        <h1 class="club">A.C. Tuscolano</h1>
        <p class="tag">Gestione Squadra</p>
      </div>
    </div>
  </header>

  <div id="admin-menu">
    <div class="nav-wrap">
      <button class="tab btn--admin" data-admin-target="admin-inserimento-giocatori-section" onclick="window.showAdminSection('admin-inserimento-giocatori-section')">Inserimento Giocatori</button>
      <button class="tab btn--admin" data-admin-target="admin-inserimento-giornate-section" onclick="window.showAdminSection('admin-inserimento-giornate-section')">Inserimento Giornate</button>
      <button class="tab btn--admin" data-admin-target="admin-calendario-section" onclick="window.showAdminSection('admin-calendario-section')">Calendario Admin</button>
      <button class="tab btn--admin" data-admin-target="admin-formazione-section" onclick="window.showAdminSection('admin-formazione-section')">Gestione Formazione</button>
      <button class="tab btn--admin" data-admin-target="admin-statistiche-section" onclick="window.showAdminSection('admin-statistiche-section')">Gestione Statistiche</button>
      <button class="tab btn--admin" data-admin-target="admin-candidature-section" onclick="window.showAdminSection('admin-candidature-section')">Candidature</button>
      <button class="tab btn--admin" data-admin-target="admin-gestione-dati-section" onclick="window.showAdminSection('admin-gestione-dati-section')">CRUD Dati</button>
      <button class="tab btn--admin" data-admin-target="admin-utenti-section" onclick="window.showAdminSection('admin-utenti-section')">Gestione Utenti</button>
      <button class="tab btn--admin" data-admin-target="admin-video-section" onclick="window.showAdminSection('admin-video-section')">Gestione Video</button>
    </div>
  </div>

  <nav>
    <div class="nav-wrap">
      <button class="tab" data-target="rosa-section" id="rosa-tab" aria-current="page" onclick="window.showPublicSection('rosa-section')">La nostra Rosa</button>
      <button class="tab" data-target="calendario-section" id="calendario-tab" onclick="window.showPublicSection('calendario-section')">Calendario & Partite</button>
      <button class="tab" data-target="statistiche-section" id="statistiche-tab" onclick="window.showPublicSection('statistiche-section')">Statistiche</button>
      <button class="tab" data-target="classifica-section" id="classifica-tab" onclick="window.showPublicSection('classifica-section')">Classifica</button>
      <button class="tab" data-target="formazione-pubblica-section" id="formazione-tab" onclick="window.showPublicSection('formazione-pubblica-section')">Formazione</button>
      <button class="tab" data-target="video-section" id="video-tab" onclick="window.showPublicSection('video-section')">Video Highlights</button>
      <button id="auth-toggle-btn" class="btn" onclick="handleAuthToggle()">Login</button>
    </div>
  </nav>

  <main>

    <section id="rosa-section" class="content-section">
      <h2>Rosa Giocatori</h2>
      <ul id="rosa-list"></ul>
      <div class="help" style="margin-top:10px">Clicca sul nome di un giocatore per vedere i dettagli. (Attualmente non implementato)</div>
    </section>

    <section id="calendario-section" class="content-section">
      <h2>Prossime Giornate</h2>
      <ul id="calendario-list"></ul>
    </section>

    <section id="statistiche-section" class="content-section">
      <h2>Risultati e Statistiche Giocatori</h2>
      <div id="statistiche-giocatori-list">
        </div>
    </section>

    <section id="classifica-section" class="content-section">
        <h2>Classifica</h2>
        <div id="classifica-content">
            </div>
    </section>

    <section id="formazione-pubblica-section" class="content-section">
      <h2>Formazione Pubblicata</h2>
      <div id="formazione-pubblica-content">
        <div class="help">La formazione sarà visibile qui una volta pubblicata dall'amministratore.</div>
      </div>
    </section>

    <section id="video-section" class="content-section">
      <h2>Video Partite</h2>
      <ul id="video-list-ul">
        </ul>
    </section>

    <section id="login-section">
      <h2>Accesso Amministratore / Giocatore</h2>
      <form id="login-form">
        <label>Email</label><input id="login-email" type="email" required />
        <label>Password</label><input id="login-password" type="password" required />
        <div class="actions"><button class="btn btn--accent" type="submit">Accedi</button></div>
      </form>
    </section>

    <section id="admin-inserimento-giocatori-section" style="display:none">
      <h2>Admin · Inserimento Giocatori</h2>
      <form id="player-form">
        <label>Nome</label><input id="player-nome" required />
        <label>Cognome</label><input id="player-cognome" required />
        <label>Numero di maglia</label><input id="player-numero" type="number" min="1" required />
        <label>Ruolo</label>
        <select id="player-ruolo" required>
          <option value="">Seleziona Ruolo</option>
          <option value="Portiere">Portiere</option>
          <option value="Difensore">Difensore</option>
          <option value="Centrocampista">Centrocampista</option>
          <option value="Attaccante">Attaccante</option>
        </select>
        <label>Stato</label>
        <select id="player-stato" required>
          <option value="Attivo">Attivo</option>
          <option value="Infortunato">Infortunato</option>
          <option value="Sospeso">Sospeso</option>
        </select>
        <div class="actions"><button class="btn btn--admin" type="submit">Salva Giocatore</button></div>
      </form>
    </section>

    <section id="admin-inserimento-giornate-section" style="display:none">
      <h2>Admin · Inserimento Partita</h2>
      <form id="match-form">
        <label>Avversaria</label><input id="match-avversaria" required />
        <label>Data (gg/mm/aaaa)</label><input id="match-data" required />
        <label>Orario</label><input id="match-orario" type="time" required />
        <label>Campo di gioco</label><input id="match-campo" required />
        <label>Casa / Trasferta</label>
        <select id="match-luogo" required>
          <option value="casa">Casa</option>
          <option value="trasferta">Trasferta</option>
        </select>
        <div class="actions"><button class="btn btn--admin" type="submit">Salva Partita</button></div>
      </form>
    </section>

    <section id="admin-calendario-section" style="display:none">
      <h2>Admin · Calendario Partite</h2>
      <ul id="admin-calendario-list">
        </ul>
    </section>

    <section id="admin-formazione-section" style="display:none">
      <h2>Admin · Gestione Formazione <span id="formazione-match-title"></span></h2>
      <div id="formazione-editor">
        <p class="help">Interfaccia di gestione formazione da implementare.</p>
        <div class="actions">
            <button class="btn btn--admin" disabled>Salva Formazione</button>
            <button class="btn btn--accent" disabled>Pubblica Formazione</button>
        </div>
      </div>
    </section>

    <section id="admin-statistiche-section" style="display:none">
      <h2>Admin · Gestione Statistiche (Partita)</h2>
      <form id="admin-stats-form">
        <label>Seleziona Partita</label>
        <select id="stats-match-select">
          <option value="">Seleziona una partita</option>
        </select>
        <p class="help">Interfaccia di gestione statistiche da implementare.</p>
        <div class="actions">
            <button id="save-stats-btn" class="btn btn--admin" type="button" disabled>Salva Statistiche</button>
        </div>
      </form>
    </section>

    <section id="admin-candidature-section" style="display:none">
      <h2>Admin · Gestione Candidature</h2>
      <label>Seleziona Partita</label>
      <select id="candidature-match-select">
        <option value="">Seleziona una partita (funzione da completare)</option>
      </select>
      <div id="candidature-editor" style="margin-top:15px; display:block">
        <div class="help">Visualizzazione e gestione candidature da completare.</div>
        <table class="table">
          <thead><tr><th>Giocatore</th><th>UID collegato</th><th>Disponibile</th></tr></thead>
          <tbody id="crud-candidature-body"><tr><td colspan="3">Nessuna candidatura.</td></tr></tbody>
        </table>
      </div>
    </section>

    <section id="admin-gestione-dati-section" style="display:none">
      <h2>Admin · Gestione Dati (CRUD)</h2>
      <h3>Gestione Giocatori</h3>
      <table class="table">
        <thead><tr><th>Nome</th><th>Numero</th><th>Ruolo</th><th>Azioni</th></tr></thead>
        <tbody id="crud-giocatori-body">
          </tbody>
      </table>
      <h3>Gestione Partite</h3>
      <table class="table">
        <thead><tr><th>Avversaria</th><th>Data</th><th>Risultato</th><th>Azioni</th></tr></thead>
        <tbody id="crud-partite-body">
          </tbody>
      </table>
    </section>

    <section id="admin-utenti-section" style="display:none">
      <h2>Admin · Inserimento utenti</h2>
      <form id="create-user-form">
        <label>Nome Giocatore</label><input id="new-nome" required />
        <label>Cognome Giocatore</label><input id="new-cognome" required />
        <label>Email</label><input id="new-email" type="email" required />
        <label>Password</label><input id="new-password" type="password" required />
        <div class="actions"><button class="btn btn--admin" type="submit">Crea utenza</button></div>
      </form>
      <div class="help">L’admin resta connesso durante la creazione grazie all’autenticazione secondaria.</div>
    </section>
    
    <section id="admin-video-section" style="display:none">
      <h2>Admin · Gestione Link Video</h2>
      <form id="admin-video-form">
        <label>Seleziona Partita</label>
        <select id="video-partita-select" required>
            </select>
        <label>Link YouTube</label>
        <input id="video-link-input" type="url" placeholder="https://www.youtube.com/watch?v=..." required />
        <div class="actions">
            <button id="save-video-btn" class="btn btn--accent" type="button">Salva Link Video</button>
        </div>
      </form>
    </section>
  </main>
  
  <div id="video-modal">
    <div style="background:var(--ink); padding:0; border-radius:var(--radius); width:90%; max-width:800px; position:relative;">
      <button id="close-video-modal" class="btn btn--accent" type="button">&times;</button>
      <div id="video-iframe-container">
        </div>
    </div>
  </div>

  <footer>
    &copy; 2024 AC Tuscolano. Tutti i diritti riservati.
  </footer>
</body>
</html>
