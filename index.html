<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AC Tuscolano | Gestione Squadra</title>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js';
        import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js';
        import { getDatabase, ref, set, push, onValue, get, update } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js';

        // ----------------------------------------------------
        // 1. CONFIGURAZIONE FIREBASE - SOSTITUIRE CON LE TUE CHIAVI! üîë
        // ----------------------------------------------------
        const firebaseConfig = {
          apiKey: "AIzaSyAQLQYXcwyFt5luNw1iA5N2-EfnbF1Bc7U",
  authDomain: "actuscolano.firebaseapp.com",
  projectId: "actuscolano",
  storageBucket: "actuscolano.firebasestorage.app",
  messagingSenderId: "62685359731",
  appId: "1:62685359731:web:26819bedd94fcb1ce8c406",
  measurementId: "G-TSVH8PH4RC"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getDatabase(app);

        // UID dell'utente Admin - SOSTITUIRE CON L'UID REALE DELL'ADMIN! üëë
        const ADMIN_UID = "ADMIN_UID_QUI"; 
        let isAdmin = false;

        // ----------------------------------------------------
        // 2. FUNZIONI UTILITY INTERFACCIA
        // ----------------------------------------------------
        
        // Nasconde tutte le sezioni tranne l'header e il menu principale
        function hideAllSections() {
            document.querySelectorAll('section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById('admin-menu').style.display = 'none';
        }

        // Mostra una specifica sezione
        function showSection(id) {
            hideAllSections();
            const section = document.getElementById(id);
            if (section) section.style.display = 'block';
            if (isAdmin && id !== 'login-section') {
                 document.getElementById('admin-menu').style.display = 'block';
            }
        }
        
        // Logica per il reindirizzamento al click del menu
        function navigate(sectionId) {
            // Se √® una sezione Admin e non √® loggato come Admin, non fare nulla
            if (sectionId.startsWith('admin-') && !isAdmin) return; 

            showSection(sectionId);
            // Carica o aggiorna i dati in base alla sezione
            if (sectionId === 'rosa-section') loadRosa();
            if (sectionId === 'calendario-section') loadProssimeGiornate(false); // Utente base
            if (sectionId === 'admin-calendario-section') loadProssimeGiornate(true); // Admin
            if (sectionId === 'statistiche-section') loadStatistiche();
        }

        window.navigate = navigate; // Rende la funzione accessibile dal DOM

        // ----------------------------------------------------
        // 3. AUTENTICAZIONE FIREBASE
        // ----------------------------------------------------

        // Gestione Login
        document.addEventListener('DOMContentLoaded', () => {
             const loginForm = document.getElementById('login-form');
             if (loginForm) {
                 loginForm.addEventListener('submit', (e) => {
                     e.preventDefault();
                     const email = document.getElementById('login-email').value;
                     const password = document.getElementById('login-password').value;

                     signInWithEmailAndPassword(auth, email, password)
                         .then((userCredential) => {
                             // Login riuscito, onAuthStateChanged gestir√† il resto
                             console.log("Utente loggato:", userCredential.user.email);
                         })
                         .catch((error) => {
                             alert("Errore Login: " + error.message);
                         });
                 });
             }
        });
        
        // Stato Autenticazione
        onAuthStateChanged(auth, (user) => {
            const loginSection = document.getElementById('login-section');
            const navLinks = document.querySelectorAll('.nav-link');
            const adminNav = document.getElementById('admin-nav');
            const logoutBtn = document.getElementById('logout-btn');

            if (user) {
                // Utente loggato
                const uid = user.uid;
                isAdmin = (uid === ADMIN_UID);
                
                // Nascondi Login, mostra Logout
                loginSection.style.display = 'none';
                logoutBtn.style.display = 'inline';

                // Mostra/Nascondi le voci di menu Admin
                navLinks.forEach(link => {
                    const sectionId = link.getAttribute('onclick').split("'")[1];
                    if (sectionId.startsWith('admin-')) {
                        link.style.display = isAdmin ? 'block' : 'none';
                    } else {
                        link.style.display = 'block'; // Voci base sempre visibili
                    }
                });

                if (isAdmin) {
                    showSection('admin-inserimento-giocatori-section');
                } else {
                    showSection('rosa-section');
                }

            } else {
                // Utente NON loggato
                isAdmin = false;
                hideAllSections();
                showSection('login-section');
                logoutBtn.style.display = 'none';

                // Imposta la navigazione per i non loggati
                navLinks.forEach(link => {
                    const sectionId = link.getAttribute('onclick').split("'")[1];
                    // I non-admin vedono solo le sezioni di base (Rosa, Calendario, Statistiche) e Login
                    if (!sectionId.startsWith('admin-')) {
                        link.style.display = 'block';
                    } else {
                        link.style.display = 'none';
                    }
                });
            }
        });

        // Gestione Logout
        window.handleLogout = function() {
            signOut(auth).then(() => {
                alert("Logout effettuato.");
                showSection('login-section');
            }).catch((error) => {
                console.error("Errore Logout:", error);
            });
        }

        // ----------------------------------------------------
        // 4. FUNZIONI DATABASE - Realtime Database
        // ----------------------------------------------------
        
        const RUOLI = ["Portiere", "Terzino sinistro", "Terzino destro", "Difensore centrale", "Centrocampista centrale", "Centrocampista sinistro", "Centrocampista destro", "Attaccante centrale"];

        // Funzione Admin: Inserimento Giocatore
        window.addPlayer = function(e) {
            if (e) e.preventDefault();
            if (!isAdmin) return alert("Accesso negato.");

            const nome = document.getElementById('giocatore-nome').value;
            const cognome = document.getElementById('giocatore-cognome').value;
            const numero = parseInt(document.getElementById('giocatore-numero').value);
            const ruolo = document.getElementById('giocatore-ruolo').value;
            const titolare = document.getElementById('giocatore-titolare').value;
            
            if (nome && cognome && numero && ruolo) {
                const newPlayerRef = push(ref(db, 'rosa'));
                set(newPlayerRef, {
                    nome: nome,
                    cognome: cognome,
                    numero: numero,
                    ruolo: ruolo,
                    stato: titolare, // Titolare o Riserva
                    // Statistiche iniziali
                    voto: 0, 
                    assist: 0, 
                    goal: 0,
                }).then(() => {
                    alert("Giocatore inserito con successo!");
                    document.getElementById('giocatore-form').reset();
                }).catch((error) => {
                    console.error("Errore inserimento giocatore:", error);
                    alert("Errore inserimento: " + error.message);
                });
            } else {
                alert("Compila tutti i campi!");
            }
        }
        
        // Funzione Utente Base: Candidatura
        window.candidati = function(matchId) {
            const user = auth.currentUser;
            if (!user) return alert("Devi essere loggato per candidarti.");

            const nomeCompleto = user.email.split('@')[0]; // Uso l'email come ID base
            
            // Logica di candidatura molto semplificata:
            const matchRef = ref(db, 'calendario/' + matchId + '/candidature/' + user.uid);
            set(matchRef, { 
                email: user.email, 
                dataCandidatura: new Date().toISOString() 
            }).then(() => {
                alert("Candidatura inviata per la partita!");
                loadProssimeGiornate(false); // Ricarica per aggiornare lo stato
            }).catch(error => {
                console.error("Errore candidatura:", error);
                alert("Errore nell'invio della candidatura.");
            });
        }

        // Carica e Visualizza la Rosa (Utente Base)
        function loadRosa() {
            const rosaList = document.getElementById('rosa-list');
            const rosaRef = ref(db, 'rosa');
            
            // Listener in tempo reale per la rosa
            onValue(rosaRef, (snapshot) => {
                const data = snapshot.val();
                rosaList.innerHTML = '';
                
                if (data) {
                    const players = Object.keys(data).map(key => ({ 
                        ...data[key], 
                        id: key 
                    })).sort((a, b) => a.numero - b.numero); // Ordina per numero maglia

                    players.forEach(player => {
                        const li = document.createElement('li');
                        li.innerHTML = `
                            **${player.numero} - ${player.nome} ${player.cognome}** (Ruolo: ${player.ruolo} | Status: ${player.stato})
                        `;
                        rosaList.appendChild(li);
                    });
                } else {
                    rosaList.innerHTML = '<p>Nessun giocatore inserito.</p>';
                }
            });
        }

        // Funzione Admin: Inserimento Giornata
        window.addMatch = function(e) {
            if (e) e.preventDefault();
            if (!isAdmin) return alert("Accesso negato.");
            
            const avversaria = document.getElementById('match-avversaria').value;
            const data = document.getElementById('match-data').value;
            const orario = document.getElementById('match-orario').value;
            const campo = document.getElementById('match-campo').value;
            const casa = document.getElementById('match-casa').value;

            if (avversaria && data && orario && campo && casa) {
                const newMatchRef = push(ref(db, 'calendario'));
                set(newMatchRef, {
                    avversaria: avversaria,
                    data: data,
                    orario: orario,
                    campo: campo,
                    casa: (casa === 'si'),
                    risultato: 'N/D',
                    candidature: {}, // Inizializza candidature vuote
                    formazioneTitolare: {},
                    sostituzioni: {},
                }).then(() => {
                    alert("Giornata inserita con successo!");
                    document.getElementById('match-form').reset();
                    navigate('calendario-section'); // Torna alla visualizzazione
                }).catch((error) => {
                    console.error("Errore inserimento giornata:", error);
                    alert("Errore inserimento: " + error.message);
                });
            } else {
                alert("Compila tutti i campi!");
            }
        }
        
        // Carica e Visualizza Prossime Giornate (Utente Base e Admin)
        function loadProssimeGiornate(forAdmin) {
            const listElement = document.getElementById(forAdmin ? 'admin-calendario-list' : 'calendario-list');
            const calendarRef = ref(db, 'calendario');
            
            onValue(calendarRef, (snapshot) => {
                const data = snapshot.val();
                listElement.innerHTML = '';
                
                if (data) {
                    const matches = Object.keys(data).map(key => ({ 
                        ...data[key], 
                        id: key 
                    }));

                    matches.forEach(match => {
                        const li = document.createElement('li');
                        
                        let statoCandidatura = '';
                        if (!forAdmin && auth.currentUser) {
                           // Controlla se l'utente attuale si √® gi√† candidato
                           const isCandidato = match.candidature && match.candidature[auth.currentUser.uid];
                           if (isCandidato) {
                              statoCandidatura = '<span style="color:red; font-weight:bold;">‚úÖ Candidato</span>';
                           } else {
                              statoCandidatura = `<button class="candidati-btn" onclick="candidati('${match.id}')">Candidatura</button>`;
                           }
                        }

                        let adminActions = '';
                        if (forAdmin) {
                            adminActions = `
                                <br>
                                <small>Candidature: ${match.candidature ? Object.keys(match.candidature).length : 0}</small>
                                <button class="admin-btn" onclick="showFormazioneForm('${match.id}', '${match.avversaria}')">Formazione</button>
                                <button class="admin-btn" onclick="showRisultatoForm('${match.id}', '${match.avversaria}')">Risultato</button>
                            `;
                        }

                        li.innerHTML = `
                            **vs ${match.avversaria}** (${match.casa ? 'Casa üè†' : 'Trasferta üöå'}) - 
                            Data: ${match.data} ${match.orario} 
                            Campo: ${match.campo}
                            ${forAdmin ? '' : statoCandidatura}
                            ${adminActions}
                        `;
                        listElement.appendChild(li);
                    });
                } else {
                    listElement.innerHTML = '<p>Nessuna prossima giornata in calendario.</p>';
                }
            });
        }
        
        // Funzione per mostrare il form di inserimento risultato
        window.showRisultatoForm = function(matchId, avversaria) {
            if (!isAdmin) return;
            // Sposta nella sezione statistiche admin
            showSection('admin-statistiche-section'); 
            document.getElementById('admin-statistiche-form').innerHTML = `
                <h3>Risultato Partita vs ${avversaria}</h3>
                <form onsubmit="saveMatchResult(event, '${matchId}')">
                    <label>AC Tuscolano Goal:</label><input type="number" id="tuscolano-goal" required><br>
                    <label>${avversaria} Goal:</label><input type="number" id="avversaria-goal" required><br>
                    <button type="submit" class="admin-btn">Salva Risultato</button>
                </form>
            `;
        }
        
        // Funzione per salvare il risultato della partita
        window.saveMatchResult = function(e, matchId) {
            e.preventDefault();
            if (!isAdmin) return;

            const goalTuscolano = document.getElementById('tuscolano-goal').value;
            const goalAvversaria = document.getElementById('avversaria-goal').value;
            const risultato = `${goalTuscolano}-${goalAvversaria}`;

            const matchRef = ref(db, 'calendario/' + matchId);
            update(matchRef, { risultato: risultato })
            .then(() => {
                alert(`Risultato salvato: ${risultato}`);
                // Aggiorna anche le statistiche di squadra (Utente Base)
                loadStatistiche(); 
            })
            .catch(error => {
                console.error("Errore salvataggio risultato:", error);
                alert("Errore salvataggio risultato.");
            });
        }
        
        // Carica le statistiche (Utente Base)
        function loadStatistiche() {
            // Sezione Risultati Squadra
            const risultatiList = document.getElementById('statistiche-risultati-list');
            const calendarRef = ref(db, 'calendario');
            
            onValue(calendarRef, (snapshot) => {
                const data = snapshot.val();
                risultatiList.innerHTML = '';
                
                if (data) {
                    const matches = Object.keys(data).map(key => ({ 
                        ...data[key], 
                        id: key 
                    }));

                    matches.filter(m => m.risultato !== 'N/D').forEach(match => {
                        const li = document.createElement('li');
                        li.innerHTML = `
                            **vs ${match.avversaria}**: 
                            Risultato: ${match.risultato} 
                            (${match.casa ? 'Casa' : 'Trasferta'})
                        `;
                        risultatiList.appendChild(li);
                    });
                } else {
                    risultatiList.innerHTML = '<p>Nessun risultato registrato.</p>';
                }
            });

            // Sezione Voti Giocatori
            const votiList = document.getElementById('statistiche-voti-list');
            const rosaRef = ref(db, 'rosa');

            onValue(rosaRef, (snapshot) => {
                const data = snapshot.val();
                votiList.innerHTML = '';
                
                if (data) {
                    Object.values(data).forEach(player => {
                        const li = document.createElement('li');
                        li.innerHTML = `
                            **${player.nome} ${player.cognome}** (N.${player.numero}): 
                            Voto Medio: ${player.voto.toFixed(1)} | Goal: ${player.goal} | Assist: ${player.assist}
                        `;
                        votiList.appendChild(li);
                    });
                } else {
                    votiList.innerHTML = '<p>Nessun dato giocatore disponibile.</p>';
                }
            });
        }
        
        // Funzione per mostrare il form di valutazione giocatore (Admin)
        window.showValutazioneForm = function() {
            if (!isAdmin) return;
            // Carica i giocatori nel menu a discesa
            get(ref(db, 'rosa')).then((snapshot) => {
                const players = snapshot.val();
                const selectPlayer = document.getElementById('valutazione-giocatore');
                selectPlayer.innerHTML = '<option value="">Seleziona Giocatore</option>';
                if (players) {
                    Object.keys(players).forEach(key => {
                        const player = players[key];
                        const option = document.createElement('option');
                        option.value = key;
                        option.textContent = `${player.nome} ${player.cognome} (N.${player.numero})`;
                        selectPlayer.appendChild(option);
                    });
                }
            });

            showSection('admin-statistiche-section'); // Assicurati che sia visibile
            document.getElementById('admin-statistiche-form').innerHTML = `
                <h3>Valutazione Singolo Giocatore</h3>
                <form onsubmit="savePlayerStats(event)">
                    <label>Giocatore:</label>
                    <select id="valutazione-giocatore" required></select><br>
                    <label>Voto (0-10):</label><input type="number" id="valutazione-voto" min="0" max="10" step="0.5" required><br>
                    <label>Goal:</label><input type="number" id="valutazione-goal" min="0" required><br>
                    <label>Assist:</label><input type="number" id="valutazione-assist" min="0" required><br>
                    <button type="submit" class="admin-btn">Salva Statistiche</button>
                </form>
            `;
            // Ricarica la lista dei giocatori nel form (chiamata due volte per popolare il select)
            get(ref(db, 'rosa')).then((snapshot) => {
                const players = snapshot.val();
                const selectPlayer = document.getElementById('valutazione-giocatore');
                selectPlayer.innerHTML = '<option value="">Seleziona Giocatore</option>';
                if (players) {
                    Object.keys(players).forEach(key => {
                        const player = players[key];
                        const option = document.createElement('option');
                        option.value = key;
                        option.textContent = `${player.nome} ${player.cognome} (N.${player.numero})`;
                        selectPlayer.appendChild(option);
                    });
                }
            });
        }
        
        // Funzione per salvare le statistiche del giocatore (Admin)
        window.savePlayerStats = function(e) {
            e.preventDefault();
            if (!isAdmin) return;

            const playerId = document.getElementById('valutazione-giocatore').value;
            const voto = parseFloat(document.getElementById('valutazione-voto').value);
            const goal = parseInt(document.getElementById('valutazione-goal').value);
            const assist = parseInt(document.getElementById('valutazione-assist').value);

            const playerRef = ref(db, 'rosa/' + playerId);
            
            get(playerRef).then(snapshot => {
                if (snapshot.exists()) {
                    const currentStats = snapshot.val();
                    
                    // La logica per calcolare la media voti √® complessa e richiede di tracciare 
                    // il numero di partite giocate. Qui semplifichiamo: 
                    // si assume che il voto inserito sia il voto della partita, 
                    // e si aggiornano goal/assist come totali.
                    // Per semplicit√†, in questa demo, la logica complessa della media non √® inclusa.
                    
                    // L'esempio seguente aggiorna solo goal e assist e sovrascrive il voto.
                    update(playerRef, {
                        voto: voto, // Semplificazione: assume che questo sia il voto della singola partita
                        goal: currentStats.goal + goal, // Aggiunge i goal/assist della partita
                        assist: currentStats.assist + assist
                    }).then(() => {
                        alert("Statistiche giocatore aggiornate!");
                        document.getElementById('admin-statistiche-form').querySelector('form').reset();
                        loadStatistiche(); // Ricarica la sezione utente base
                    });
                } else {
                    alert("Giocatore non trovato.");
                }
            }).catch(error => {
                console.error("Errore salvataggio stats:", error);
                alert("Errore salvataggio statistiche.");
            });
        }
        
        // Funzione Admin: Sezione Inserimento Formazione (Solo Struttura Base)
        window.showFormazioneForm = function(matchId, avversaria) {
            if (!isAdmin) return;
            showSection('admin-formazione-section'); 
            
            // Logica per popolare il form con i giocatori e le candidature 
            // e salvare in 'calendario/matchId/formazioneTitolare'
            document.getElementById('formazione-content').innerHTML = `
                <h3>Formazione e Sostituzioni vs ${avversaria}</h3>
                <p>‚ö†Ô∏è **Nota:** Le sezioni "Formazione per singola giornata" e "Sostituzioni" con simulazione grafica sono state omesse/semplificate a causa della loro complessit√† di sviluppo che va oltre un singolo file HTML/JS vanilla. Qui forniamo solo un segnaposto per la loro implementazione.
                </p>
                <form onsubmit="alert('Formazione salvata (simulazione)'); return false;">
                    <h4>1. Seleziona Titolari (3-3-1)</h4>
                    <label>Portiere:</label><select><option>Giocatore 1</option></select><br>
                    <label>Difensore Centrale 1:</label><select><option>Giocatore 2</option></select><br>
                    <label>Panchina:</label><textarea rows="5" placeholder="Elenco riserve qui..."></textarea><br>
                    
                    <hr>
                    <h4>2. Inserimento Sostituzioni (Simulazione)</h4>
                    <p>
                        Qui dovrebbe esserci la logica per inserire le 8 sostituzioni e il codice che genera la rappresentazione grafica delle 9 formazioni.
                    </p>
                    <div id="campo-di-gioco-simulazione" style="background-color: green; color: white; height: 300px; text-align: center; line-height: 300px; border: 2px solid white;">
                        [Campo da Gioco 3-3-1 Grafico (Richiede Canvas/SVG)]
                    </div>
                    <button type="submit" class="admin-btn">Salva Formazione & Sostituzioni</button>
                </form>
            `;
        }

        
    </script>

    <style>
        /* CSS Responsive per AC Tuscolano */
        :root {
            --color-primary: #FFF;     /* Bianco */
            --color-secondary: #FFD700; /* Giallo (Oro) */
            --color-accent: #FF0000;    /* Rosso */
            --color-text: #333;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--color-primary);
            color: var(--color-text);
            line-height: 1.6;
        }

        /* Intestazione (Header) */
        header {
            background-color: var(--color-accent);
            color: var(--color-primary);
            padding: 20px 10px;
            text-align: center;
            border-bottom: 5px solid var(--color-secondary);
        }

        h1 {
            margin: 0;
            font-size: 2em;
        }

        /* Menu di Navigazione */
        nav {
            background-color: var(--color-secondary);
            padding: 10px 0;
            text-align: center;
        }

        .nav-link {
            display: inline-block;
            color: var(--color-text);
            text-decoration: none;
            padding: 10px 15px;
            margin: 0 5px;
            border-radius: 5px;
            transition: background-color 0.3s;
            cursor: pointer;
            font-weight: bold;
        }

        .nav-link:hover {
            background-color: var(--color-primary);
        }
        
        /* Bottone Logout */
        #logout-btn {
            display: none;
            background-color: var(--color-accent);
            color: var(--color-primary);
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
        }

        /* Sezioni Contenuto */
        section {
            padding: 20px;
            margin: 20px auto;
            max-width: 90%;
            background-color: var(--color-primary);
            border: 1px solid #ddd;
            border-radius: 8px;
            display: none; /* Inizialmente nascoste */
        }
        
        h2 {
            color: var(--color-accent);
            border-bottom: 2px solid var(--color-secondary);
            padding-bottom: 5px;
            margin-top: 0;
        }

        /* Form e Input */
        form label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
        }

        form input[type="email"], 
        form input[type="password"],
        form input[type="text"],
        form input[type="number"],
        form input[type="date"],
        form input[type="time"],
        form select,
        form textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            max-width: 400px;
        }
        
        form button, .candidati-btn, .admin-btn {
            background-color: var(--color-accent);
            color: var(--color-primary);
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 15px;
            transition: background-color 0.3s;
        }
        
        form button:hover, .candidati-btn:hover, .admin-btn:hover {
            background-color: #CC0000;
        }
        
        .admin-btn {
            background-color: #333;
            margin-right: 5px;
        }

        /* Liste (Rosa, Calendario, Statistiche) */
        ul {
            list-style: none;
            padding: 0;
        }

        ul li {
            background-color: #f9f9f9;
            margin-bottom: 10px;
            padding: 15px;
            border-left: 5px solid var(--color-secondary);
            border-radius: 4px;
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            h1 {
                font-size: 1.5em;
            }

            .nav-link {
                display: block;
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>

    <header>
        <h1>AC Tuscolano ‚öΩ</h1>
    </header>

    <nav>
        <div id="main-nav">
            <a class="nav-link" onclick="navigate('login-section')" style="display:none;">Login üîë</a>
            <a class="nav-link" onclick="navigate('rosa-section')">Rosa üßë‚Äçü§ù‚Äçüßë</a>
            <a class="nav-link" onclick="navigate('calendario-section')">Calendario üìÖ</a>
            <a class="nav-link" onclick="navigate('statistiche-section')">Statistiche üìä</a>
            <button id="logout-btn" onclick="handleLogout()">Logout</button>
        </div>
        
        <div id="admin-menu" style="display:none; margin-top: 10px; background-color: var(--color-accent); padding: 5px 0;">
            <span style="color:var(--color-primary); font-weight:bold;">üõ†Ô∏è Menu Admin:</span>
            <a class="nav-link" onclick="navigate('admin-inserimento-giocatori-section')" style="background-color:#FFD700; color:#333;">Ins. Giocatori</a>
            <a class="nav-link" onclick="navigate('admin-calendario-section')" style="background-color:#FFD700; color:#333;">Ins. Giornate</a>
            <a class="nav-link" onclick="navigate('admin-formazione-section')" style="background-color:#FFD700; color:#333;">Ins. Formazione</a>
            <a class="nav-link" onclick="navigate('admin-statistiche-section')" style="background-color:#FFD700; color:#333;">Ins. Statistiche</a>
        </div>
    </nav>
    
    <section id="login-section" style="display: block;">
        <h2>Accesso</h2>
        <form id="login-form">
            <label for="login-email">Email:</label>
            <input type="email" id="login-email" required>
            
            <label for="login-password">Password:</label>
            <input type="password" id="login-password" required>
            
            <button type="submit">Accedi</button>
            <p>Usa le credenziali admin per accedere alle funzioni di gestione.</p>
        </form>
    </section>

    <section id="rosa-section">
        <h2>Rosa Giocatori</h2>
        <ul id="rosa-list">
            <li>Caricamento Rosa...</li>
        </ul>
    </section>

    <section id="calendario-section">
        <h2>Prossime Giornate & Candidature</h2>
        <ul id="calendario-list">
            <li>Caricamento Calendario...</li>
        </ul>
        <p>Clicca sul pulsante **Candidatura** per confermare la tua disponibilit√†.</p>
    </section>
    
    <section id="statistiche-section">
        <h2>Prestazioni e Statistiche</h2>

        <h3>Risultati Squadra</h3>
        <ul id="statistiche-risultati-list">
            </ul>
        
        <h3>Statistiche Giocatori</h3>
        <ul id="statistiche-voti-list">
            </ul>
    </section>

    <section id="admin-inserimento-giocatori-section">
        <h2>üõ†Ô∏è Admin: Inserimento Giocatori</h2>
        <form id="giocatore-form" onsubmit="addPlayer(event)">
            <label for="giocatore-nome">Nome:</label>
            <input type="text" id="giocatore-nome" required>
            
            <label for="giocatore-cognome">Cognome:</label>
            <input type="text" id="giocatore-cognome" required>
            
            <label for="giocatore-numero">Numero Maglia:</label>
            <input type="number" id="giocatore-numero" min="1" max="99" required>
            
            <label for="giocatore-ruolo">Ruolo:</label>
            <select id="giocatore-ruolo" required>
                <option value="Portiere">Portiere</option>
                <option value="Terzino sinistro">Terzino sinistro</option>
                <option value="Terzino destro">Terzino destro</option>
                <option value="Difensore centrale">Difensore centrale</option>
                <option value="Centrocampista centrale">Centrocampista centrale</option>
                <option value="Centrocampista sinistro">Centrocampista sinistro</option>
                <option value="Centrocampista destro">Centrocampista destro</option>
                <option value="Attaccante centrale">Attaccante centrale</option>
            </select>
            
            <label for="giocatore-titolare">Titolare o Riserva:</label>
            <select id="giocatore-titolare" required>
                <option value="Titolare">Titolare</option>
                <option value="Riserva">Riserva</option>
            </select>
            
            <button type="submit" class="admin-btn">Inserisci Giocatore</button>
        </form>
    </section>

    <section id="admin-calendario-section">
        <h2>üõ†Ô∏è Admin: Inserimento Prossime Giornate</h2>
        <form id="match-form" onsubmit="addMatch(event)">
            <label for="match-avversaria">Nome Squadra Avversaria:</label>
            <input type="text" id="match-avversaria" required>
            
            <label for="match-data">Data:</label>
            <input type="date" id="match-data" required>
            
            <label for="match-orario">Orario:</label>
            <input type="time" id="match-orario" required>
            
            <label for="match-campo">Campo di Gioco:</label>
            <input type="text" id="match-campo" required>
            
            <label for="match-casa">In Casa o Fuori Casa:</label>
            <select id="match-casa" required>
                <option value="si">In Casa</option>
                <option value="no">Fuori Casa</option>
            </select>
            
            <button type="submit" class="admin-btn">Inserisci Giornata</button>
        </form>
        
        <h3>Prossime Giornate Inserite</h3>
        <ul id="admin-calendario-list">
            <li>Caricamento Calendario Admin...</li>
        </ul>
    </section>

    <section id="admin-formazione-section">
        <h2>üõ†Ô∏è Admin: Inserimento Formazione & Sostituzioni</h2>
        <div id="formazione-content">
            <p>Seleziona una partita dalla sezione "Inserimento Prossime Giornate" per gestire la formazione e le sostituzioni.</p>
        </div>
    </section>
    
    <section id="admin-statistiche-section">
        <h2>üõ†Ô∏è Admin: Gestione Statistiche</h2>
        
        <button onclick="showValutazioneForm()" class="admin-btn">Inserisci Voto/Goal Giocatore</button>
        <p>I risultati delle partite vengono inseriti direttamente dalla sezione "Inserimento Prossime Giornate".</p>

        <div id="admin-statistiche-form">
            </div>
    </section>

</body>
</html>


